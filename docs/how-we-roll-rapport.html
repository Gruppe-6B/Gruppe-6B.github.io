<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TITTEL</title>
    <style>
     <!-- Her kan stil defineres (vi skal bruke Cascading Style Sheets) -->
    </style>
    <!--

       [[[[[[[[     [[[[[[[[        [[[[   [[[[   [[[[  [[[[
       [::::::[    [::[             [::[   [::[   [::[  [::[
         [::[      [::[             [::[   [::[   [::[  [::[
         [::[       [::::[   [[[[   [::[   [::[   [[[[[[[[[[
         [::[          [::[         [::[   [::[         [::[
       [::::::[        [::[         [::[   [::[         [::[
       [[[[[[[[   [[[[[[[[          [[[[   [[[[         [[[[

    -->
</head>
<body>
<!-- Her skrives alt innhold, som man ønsker å "tegne" på skjermen. -->

<table>
    <thead>
        <tr>
            <th></th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody id="howWeRollTableBody">


    </tbody>
</table>

<canvas id="report"></canvas>

<script>
    // Dette er en kommentar
    const spm = [
        ["morgenEllerNatt", "Morgenfugl", "Nattugle"],
        ["lagarbeid", "Fortrekker å jobbe selvstendig", "Foretrekker å jobbe i gruppe"],
        ["improvisere", "Planlegge nøye først", "Improvisere"],
       ];

    const jsons = ["20211007100530-7d170895649d242b823fad8757145257.json",
        "20211007100610-a99f9a2a596db0f8e41de8ff268689eb.json",
        "20211007100632-2220794f961a680a55789a4e6a189001.json"];

    let howWeRollTableBody = document.getElementById('howWeRollTableBody');
    spm.forEach(skrivSpørsmål);


    function skrivSpørsmål(item) {

        let tr = document.createElement('tr');
        let inner = '<td style="text-align:right;"><label for="' + item[0] + '">' + item[1] + '</label></td>' +
            '<td><canvas id="canvas-' + item[0] + '"></canvas></td>' +
            '<td><label for="' + item[0] + '">' + item[2] + '</label></td>';
        tr.innerHTML = inner;

        howWeRollTableBody.appendChild(tr);
    }

    /*
    fetch('https://bacit.info/hwr/20210926134925-47352fbdecddd9a754001f4e4abbf40f.json')
    .then(response => response.json())
    .then(data => console.log(data));

    fetch('https://bacit.info/hwr/20210926162029-a89356bb617d3bbf870649c08570427e.json')
    .then(response => response.json())
    .then(data => console.log(data));

    fetch('https://bacit.info/hwr/20210927113650-03cb3bd829e6445c77d338b671670a58.json')
    .then(response => response.json())
    .then(data => console.log(data));

    var canvas = document.getElementById('report');
    var context = canvas.getContext('2d');
    */


    jsons.forEach(renderJSON);

    function renderJSON(item) {
        fetch('https://bacit.info/hwr/' + item, {cache: 'no-cache'})
            .then(response => response.json())
            .then(data => {
                //data inneholder modellen
                console.log(data);

                spm.forEach(skrivTilCanvas(item, data));

                /*
                document.querySelector("#debug").innerText = data.data01 + " " + data
                    .dorn + " " + data.cora;

                var canvas = document.getElementById('canvas');
                var context = canvas.getContext('2d');

                context.font = '14px serif';
                context.fillText('dorn', 30, 24);
                context.fillText('cora', 30, 74);

                context.beginPath();
                context.moveTo(70,20);
                context.lineTo(170,20);

                //context.beginPath();
                context.moveTo(70,70);
                context.lineTo(170,70);
                context.stroke();


                var X = 70 + parseInt(data.dorn, 10);
                var Y = 20;
                var R = 5;
                context.beginPath();
                context.arc(X, Y, R, 0, 2*Math.PI, false);
                context.fillStyle = "lightgreen";
                context.fill();
                context.lineWidth = 1;
                context.strokeStyle = "black";
                context.stroke();
                //context.closePath();

                var X = 70 + parseInt(data.cora, 10);
                var Y = 70;
                var R = 5;
                context.beginPath();
                context.arc(X, Y, R, 0, 2*Math.PI, false);
                context.fillStyle = "red";
                context.fill();
                context.lineWidth = 1;
                context.strokeStyle = "black";
                context.stroke();

                 */

            });
    }

    //tar imot spm og data og skriver til riktig canvas element
    function skrivTilCanvas(item,json) {
        let canvas = document.getElementById('canvas-' + spm[0]);
        console.log(canvas);
    }



</script>
</body>
</html>