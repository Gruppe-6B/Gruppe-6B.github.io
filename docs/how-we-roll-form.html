<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HowWeRoll prototype (lagring)</title>
    <!-- Med denne filen ønsker vi å bevise at vi kan samle inn data ... -->
    <style>
     /* Her kan stil defineres (vi skal bruke Cascading Style Sheets) */
        body {
            background-color: #171717;
            color: #ededed;
        }

        label {
            font-size: 12px;
            color: rgb(200,200,200);
        }
    </style>
    <!--

       [[[[[[[[     [[[[[[[[        [[[[   [[[[   [[[[  [[[[
       [::::::[    [::[             [::[   [::[   [::[  [::[
         [::[      [::[             [::[   [::[   [::[  [::[
         [::[       [::::[   [[[[   [::[   [::[   [[[[[[[[[[
         [::[          [::[         [::[   [::[         [::[
       [::::::[        [::[         [::[   [::[         [::[
       [[[[[[[[   [[[[[[[[          [[[[   [[[[         [[[[

    -->
</head>
<body>
    <!-- Her skrives alt innhold, som man ønsker å "tegne" på skjermen. -->
    <!-- Issue se https://html.spec.whatwg.org/multipage/forms.html#introduction-4 -->
    <hr>
    <form>
        <table>

            <tbody>
                <tr>
                    <td><label for="navn">Navn</label></td>
                    <td><input type="text" name="navn" id="navn"/></td>
                    <td></td>
                </tr>
                <tr id="howWeRollRow">
                    <td colspan="3" style="text-align:center;">
                        <h3>HowWeRoll-parametre</h3>
                    </td>
                </tr>

            </tbody>
        </table>




        <p>
            <label>Please choose one of the numbers:
                <select name="numb">
                    <option value="ten">10</option>
                    <option value="twenty">20</option>
                    <option value="forty" disabled>30</option>
                </select>
            </label>
        </p>

        <button type="submit">Send</button>
    </form>

    <div class="results">
        <h2>Form Data</h2>
        <pre></pre>
    </div>

    <script type="text/javascript">
       //Example POST method implementation using fetch:
       async function postData(url = '', data = {}) {
           // Default options are marked with *
           const response = await fetch(url, {
               method: 'POST', // *GET, POST, PUT, DELETE, etc.
               mode: 'cors', // no-cors, *cors, same-origin
               cache: 'no-cache', // *default, no-cache, reload, force-cache,only-if-cached
               credentials: 'same-origin', // include, *same-origin, omit
               headers: {
                   'Content-Type': 'application/json',
                    // 'Content-Type': 'application/x-www-form-urlencoded',
               },
               redirect: 'follow', // manual, *follow, error
               referrerPolicy: 'no-referrer', // no-referrer,*no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
               body: JSON.stringify(data) // body data type must match"Content-Type"header
           });
           return response.json(); // parses JSON response into native JavaScriptobjects
       }

       function handleSubmit(event) {
            event.preventDefault();
            const data = new FormData(event.target);

            const formJSON = Object.fromEntries(data.entries());
            const results = document.querySelector('.results pre');
            postData('https://bacit.info/', formJSON)
            .then(data => {
               results.innerText = JSON.stringify(data, null, 2);
            });
       }

       const spm = [
            ["morgenEllerNatt", "Morgenfugl", "Nattugle"],
            ["lagarbeid", "Fortrekker å jobbe selvstendig", "Foretrekker å jobbe i gruppe"],
            ["improvisere", "Planlegge nøye først", "Improvisere"],
            ["perfeksjonist", "Tidsorientert", "Perfeksjonist"],
            ["åpenForIdeer", "Konservativ", "Åpen"],
            ["konflikt", "Konfliktsy", "Fort irritert"],
            ["besluttsom", "Ubesluttsom", "Besluttsom"],
            ["mengdePerioder", "Korte", "Lange"],
            ["tidsbruk", "Få ting gjort", "Ta seg god tid"],
            ["ledeFølge", "Følge", "Lede"]

       ];
       let howWeRollRow = document.getElementById('howWeRollRow');
       console.log(howWeRollRow);
       spm.forEach(skrivSpørsmål);


       function skrivSpørsmål(item) {
            console.log(item);
            let tr = document.createElement('tr');
            let inner = '<td style="text-align:right;"><label for="' + item[0] + '">' + item[1] + '</label></td>' +
            '<td><input type="range" id="' + item[0] + '" name="' + item[0] + '" min="0" max="10" value="5">' +
            '<td><label for="' + item[0] + '">' + item[2] + '</label></td>';
            tr.innerHTML = inner;
            howWeRollRow.parentNode.insertBefore(tr, howWeRollRow.nextSibling);
       }
       console.log(spm);
       const form = document.querySelector('form');
       form.addEventListener('submit', handleSubmit);
    </script>
</body>
</html>
